<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="https://raw.githubusercontent.com/pzaffino/Radiomics.jl/refs/heads/main/Logo%20Radiomicsjl.png" type="image/x-icon">
  <title>NGTDM Features - Radiomics.jl</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #2563eb;
      --primary-dark: #1e40af;
      --primary-light: #3b82f6;
      --secondary: #0f172a;
      --text-primary: #1e293b;
      --text-secondary: #64748b;
      --bg-light: #f8fafc;
      --bg-white: #ffffff;
      --border: #e2e8f0;
      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
      --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.08);
      --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      display: flex;
      min-height: 100vh;
      background-color: var(--bg-light);
      color: var(--text-primary);
      line-height: 1.6;
    }

    /* Mobile Menu Toggle */
    .mobile-menu-toggle {
      display: none;
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 300;
      background: var(--primary);
      color: white;
      border: none;
      padding: 12px 16px;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: var(--shadow-lg);
      font-size: 1.2rem;
      transition: all 0.3s;
    }

    .mobile-menu-toggle:hover {
      background: var(--primary-dark);
      transform: scale(1.05);
    }

    .mobile-menu-toggle.active {
      background: #ef4444;
    }

    /* Logo in alto a sinistra */
    .top-left-logo {
      position: fixed;
      top: 20px;
      left: 70px;
      z-index: 200;
      width: 160px;
      height: 160px;
      background: white;
      border-radius: 8px;
      padding: 10px;
      box-shadow: var(--shadow-lg);
      transition: transform 0.3s ease;
    }

    .top-left-logo:hover {
      transform: scale(1.05);
    }

    .top-left-logo img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    /* Sidebar Styling */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      width: 300px;
      background: linear-gradient(180deg, var(--secondary) 0%, #1e293b 100%);
      color: white;
      padding: 0;
      display: flex;
      flex-direction: column;
      box-shadow: var(--shadow-xl);
      overflow-y: auto;
      z-index: 100;
      transition: transform 0.3s ease;
    }

    .sidebar-header {
      padding: 200px 30px 30px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(0, 0, 0, 0.2);
    }

    .sidebar h2 {
      font-size: 1.75rem;
      font-weight: 800;
      letter-spacing: -0.5px;
      margin-bottom: 8px;
      background: linear-gradient(135deg, #ffffff 0%, #94a3b8 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .sidebar-subtitle {
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.6);
      font-weight: 400;
      letter-spacing: 0.5px;
    }

    .sidebar nav {
      padding: 20px 0;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .sidebar a {
      color: rgba(255, 255, 255, 0.85);
      text-decoration: none;
      padding: 14px 30px;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      font-weight: 500;
      font-size: 0.95rem;
      border-left: 3px solid transparent;
    }

    .sidebar a:hover {
      background-color: rgba(255, 255, 255, 0.08);
      color: white;
      border-left-color: var(--primary-light);
    }
    
    .sidebar a.active {
      background-color: rgba(37, 99, 235, 0.15);
      color: white;
      font-weight: 600;
      border-left-color: var(--primary-light);
    }

    .dropdown {
      display: flex;
      flex-direction: column;
    }

    .dropdown-btn {
      background: none;
      border: none;
      color: rgba(255, 255, 255, 0.85);
      text-align: left;
      padding: 14px 30px;
      cursor: pointer;
      font-size: 0.95rem;
      font-weight: 500;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-left: 3px solid transparent;
      font-family: 'Inter', sans-serif;
    }

    .dropdown-btn::after {
      content: '▾';
      font-size: 0.8rem;
      transition: transform 0.3s;
      opacity: 0.7;
    }

    .dropdown.active .dropdown-btn::after {
      transform: rotate(180deg);
    }

    .dropdown-btn:hover {
      background-color: rgba(255, 255, 255, 0.08);
      color: white;
      border-left-color: var(--primary-light);
    }

    .dropdown-content {
      display: none;
      flex-direction: column;
      background: rgba(0, 0, 0, 0.15);
      padding: 8px 0;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
    }

    .dropdown-content a {
      font-size: 0.88rem;
      padding: 10px 30px 10px 50px;
      font-weight: 400;
      border-left: 3px solid transparent;
    }

    .dropdown-content a::before {
      width: 4px;
      height: 4px;
    }

    .dropdown.active .dropdown-content {
      display: flex;
      max-height: 500px;
    }

    /* Main Content */
    .main {
      flex: 1;
      padding: 0;
      width: 100%;
      margin-left: 300px;
    }

    /* Page Header */
    .page-header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      padding: 60px 60px;
      color: white;
      position: relative;
      overflow: hidden;
    }

    .page-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg width="60" height="60" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="60" height="60" patternUnits="userSpaceOnUse"><path d="M 60 0 L 0 0 0 60" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grid)"/></svg>');
      opacity: 0.3;
    }

    .page-header-content {
      position: relative;
      z-index: 1;
    }

    .page-header h1 {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 12px;
      letter-spacing: -1px;
    }

    .page-header p {
      font-size: 1.1rem;
      opacity: 0.95;
      font-weight: 400;
      color: white
    }

    /* Content Section */
    .content {
      padding: 60px;
      background: white;
      max-width: 1200px;
      margin: 0 auto;
    }

    .section {
      margin-bottom: 50px;
    }

    h2 {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 20px;
      position: relative;
      padding-bottom: 12px;
    }

    h2::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 50px;
      height: 3px;
      background: linear-gradient(90deg, var(--primary) 0%, var(--primary-light) 100%);
      border-radius: 2px;
    }

    p {
      color: var(--text-secondary);
      line-height: 1.8;
      font-size: 1rem;
      margin-bottom: 16px;
    }

    code {
      background: #f1f5f9;
      color: #0f172a;
      padding: 3px 8px;
      border-radius: 4px;
      font-family: 'Fira Code', 'Consolas', monospace;
      font-size: 0.9rem;
      border: 1px solid var(--border);
    }

    /* Info Box */
    .info-box {
      background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
      border-left: 4px solid var(--primary);
      padding: 24px;
      border-radius: 8px;
      margin: 30px 0;
    }

    .info-box p {
      margin-bottom: 0;
    }

    /* Feature List */
    .feature-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 16px;
      margin: 30px 0;
    }

    .feature-item {
      background: var(--bg-light);
      border-left: 3px solid var(--primary-light);
      padding: 16px 20px;
      border-radius: 8px;
      transition: all 0.3s;
    }

    .feature-item:hover {
      background: white;
      box-shadow: var(--shadow-md);
      transform: translateX(4px);
    }

    .feature-item strong {
      display: block;
      color: var(--primary-dark);
      font-weight: 600;
      font-size: 1.15rem;
      margin-bottom: 8px;
    }

    .feature-item p {
      margin: 4px 0 0 0;
      font-size: 0.95rem;
      color: var(--text-secondary);
    }

    .formula {
      margin-top: 12px;
      font-family: 'Courier New', monospace;
      background: white;
      padding: 8px;
      border-radius: 4px;
      font-size: 0.9rem;
      color: var(--primary-dark);
      border: 1px solid var(--border);
    }

    /* Steps List */
    .steps-list {
      background: var(--bg-light);
      border-radius: 12px;
      padding: 30px;
      margin: 30px 0;
    }

    .steps-list ol {
      margin-left: 24px;
      counter-reset: step-counter;
      list-style: none;
    }

    .steps-list li {
      counter-increment: step-counter;
      position: relative;
      padding-left: 40px;
      margin-bottom: 20px;
      color: var(--text-secondary);
      line-height: 1.8;
    }

    .steps-list li::before {
      content: counter(step-counter);
      position: absolute;
      left: 0;
      top: 0;
      background: var(--primary);
      color: white;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.9rem;
    }

    /* Footer */
    .footer {
      background: var(--secondary);
      color: rgba(255, 255, 255, 0.7);
      padding: 40px 60px;
      text-align: center;
      font-size: 0.9rem;
    }

    .footer a {
      color: var(--primary-light);
      text-decoration: none;
    }

    .footer a:hover {
      text-decoration: underline;
    }

    /* Overlay for mobile menu */
    .overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 200;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .overlay.active {
      display: block;
      opacity: 1;
    }

    /* Tablet breakpoint */
    @media (max-width: 1024px) {
      .top-left-logo {
        width: 120px;
        height: 120px;
        left: 50px;
      }

      .sidebar {
        width: 260px;
      }

      .main {
        margin-left: 260px;
      }

      .page-header, .content, .footer {
        padding: 40px;
      }

      .page-header h1 {
        font-size: 2rem;
      }

      h2 {
        font-size: 1.5rem;
      }

      .feature-list {
        grid-template-columns: 1fr;
      }
    }

    /* Mobile breakpoint */
    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }

      .mobile-menu-toggle {
        display: block;
      }

      .sidebar {
        width: 280px;
        transform: translateX(-100%);
        z-index: 250;
      }

      .sidebar.mobile-open {
        transform: translateX(0);
      }

      .main {
        margin-left: 0;
        width: 100%;
      }

      .top-left-logo {
        width: 80px;
        height: 80px;
        top: 15px;
        left: 50%;
        transform: translateX(-50%);
      }

      .top-left-logo:hover {
        transform: translateX(-50%) scale(1.05);
      }

      .sidebar-header {
        padding: 110px 25px 25px;
      }

      .sidebar h2 {
        font-size: 1.5rem;
      }

      .sidebar nav {
        padding: 15px 0;
      }

      .sidebar a,
      .dropdown-btn {
        padding: 12px 25px;
        font-size: 0.9rem;
      }

      .dropdown-content a {
        padding: 10px 25px 10px 45px;
        font-size: 0.85rem;
      }

      .page-header {
        padding: 100px 25px 40px;
      }

      .page-header h1 {
        font-size: 1.75rem;
      }

      .page-header p {
        font-size: 1rem;
      }

      .content {
        padding: 30px 25px;
      }

      .section {
        margin-bottom: 40px;
      }

      h2 {
        font-size: 1.4rem;
      }

      .feature-list {
        grid-template-columns: 1fr;
        gap: 14px;
      }

      .feature-item {
        padding: 14px 18px;
      }

      .feature-item strong {
        font-size: 1rem;
      }

      .formula {
        font-size: 0.85rem;
        padding: 6px;
      }

      .info-box {
        padding: 15px;
      }
    }
  </style>
</head>
<body>

  <button class="mobile-menu-toggle" id="mobileMenuToggle">☰</button>
  <div class="overlay" id="overlay"></div>

  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="top-left-logo">
        <img src="https://raw.githubusercontent.com/pzaffino/Radiomics.jl/refs/heads/main/Logo%20Radiomicsjl.png" alt="Radiomics.jl Logo">
      </div>
    </div>
    <nav>
      <a href="index.html">Home</a>
      <div class="dropdown active">
        <button class="dropdown-btn">Features</button>
        <div class="dropdown-content">
          <a href="first-order.html">First-order features</a>
          <a href="2d-shape.html">2D shape features</a>
          <a href="3d-shape.html">3D shape features</a>
          <a href="glcm.html">GLCM features</a>
          <a href="gldm.html">GLDM features</a>
          <a href="glrlm.html">GLRLM features</a>
          <a href="glszm.html">GLSZM features</a>
          <a href="ngtdm.html" class="active">NGTDM features</a>
        </div>
      </div>
      <a href="installation.html">Getting Start</a>
    </nav>
  </aside>

  <main class="main">
    <section class="page-header">
      <div class="page-header-content">
        <h1>NGTDM Features</h1>
        <p>Neighbouring Gray Tone Difference Matrix analysis for local texture pattern characterization</p>
      </div>
    </section>

    <div class="content">
      <div class="section">
        <h2>Overview</h2>
        <p>The Neighbouring Gray Tone Difference Matrix (NGTDM) quantifies the difference between a gray value and the average gray value of its neighbors within a specified distance. This texture analysis method captures local intensity variations and spatial patterns by analyzing how each voxel's intensity relates to its surrounding neighborhood, providing essential descriptors for characterizing tissue heterogeneity in medical imaging.</p>
        
        <div class="info-box">
          <p>NGTDM features excel at capturing fine-scale texture patterns and local intensity variations by comparing each voxel with its immediate neighborhood. These features are particularly sensitive to subtle changes in tissue structure, making them invaluable for detecting early disease progression, tumor characterization, and quantitative assessment of heterogeneity in radiomics research.</p>
        </div>
      </div>

      <div class="section">
        <h2>Extracted Features</h2>
        <p>The following NGTDM-based texture features are computed:</p>

        <div class="feature-list">
          <div class="feature-item">
            <strong>Coarseness</strong>
            <p>Measures the spatial rate of change in intensity; higher values indicate coarser textures with larger homogeneous regions.</p>
            <div class="formula">Coarseness = 1 / Σ<sub>i</sub> p<sub>i</sub> · s<sub>i</sub></div>
          </div>

          <div class="feature-item">
            <strong>Contrast</strong>
            <p>Quantifies the intensity contrast between a voxel and its neighbors; higher values indicate larger differences and more heterogeneous patterns.</p>
            <div class="formula">Contrast = (1 / (N<sub>g</sub>(N<sub>g</sub> - 1))) · Σ<sub>i,j</sub> p<sub>i</sub> · p<sub>j</sub> · (i - j)²</div>
          </div>

          <div class="feature-item">
            <strong>Busyness</strong>
            <p>Measures rapid changes in intensity between neighboring voxels; higher values indicate more heterogeneous and busy textures.</p>
            <div class="formula">Busyness = Σ<sub>i</sub> p<sub>i</sub> · s<sub>i</sub> / Σ<sub>i,j</sub> |i - j| · p<sub>i</sub> · p<sub>j</sub></div>
          </div>

          <div class="feature-item">
            <strong>Complexity</strong>
            <p>Evaluates local intensity variations considering differences among all gray levels; higher values indicate more complex and intricate texture patterns.</p>
            <div class="formula">Complexity = Σ<sub>i,j</sub> |i - j| / N<sub>v</sub> · (p<sub>i</sub> · s<sub>i</sub> + p<sub>j</sub> · s<sub>j</sub>)</div>
          </div>

          <div class="feature-item">
            <strong>Strength</strong>
            <p>Measures the perceptual strength of the texture patterns; higher values indicate more prominent and well-defined structures within the region.</p>
            <div class="formula">Strength = Σ<sub>i,j</sub> (p<sub>i</sub> + p<sub>j</sub>) · (i - j)² / Σ<sub>i</sub> s<sub>i</sub></div>
          </div>
        </div>
      </div>

      <div class="section">
        <h2>Notation Legend</h2>
        <p style="margin-bottom: 12px;">The following symbols are used in the formulas above:</p>
        <ul style="margin-left: 24px; color: var(--text-secondary); line-height: 2;">
          <li><strong>G</strong> : Number of gray levels in the quantized image.</li>
          <li><strong>i, j</strong> : Gray level indices, ranging from 1 to <strong>G</strong>.</li>
          <li><strong>p_i</strong> : Probability of gray level <strong>i</strong> in the region of interest (ROI).</li>
          <li><strong>s_i</strong> : Sum of absolute differences between gray level <strong>i</strong> and the average of its neighbors.</li>
          <li><strong>N_g</strong> : Total number of gray levels (same as <strong>G</strong>).</li>
          <li><strong>N</strong> : Number of voxels (or pixels) in the ROI.</li>
          <li><strong>f(i,j)</strong> : Frequency or probability of occurrence of gray level pair (<strong>i,j</strong>).</li>
          <li><strong>Δ(i)</strong> : Difference between gray level <strong>i</strong> and the average of its neighboring voxels.</li>
        </ul>
      </div>


      <div class="section">
        <h2>Calculation Methodology</h2>
        <div class="steps-list">
          <ol>
            <li>Discretize the image based on <code>n_bins</code> or <code>bin_width</code> parameters to create quantized intensity levels for consistent analysis.</li>
            <li>Compute the NGTDM matrix using <code>calculate_ngtdm_matrix</code>, which evaluates the neighborhood of each voxel and calculates intensity differences.</li>
            <li>Calculate coefficients using <code>calculate_ngtdm_coefficients</code>, deriving probability distributions (<code>p_i</code>) and difference measures (<code>s_i</code>).</li>
            <li>Extract individual features using their corresponding mathematical formulas: <code>coarseness</code>, <code>contrast</code>, <code>busyness</code>, <code>complexity</code>, and <code>strength</code>.</li>
          </ol>
        </div>
      </div>

      <div class="section">
        <h2>Clinical Applications</h2>
        <div class="info-box">
          <p>NGTDM features are particularly valuable for capturing local texture patterns and assessing heterogeneity within regions of interest in medical imaging. These features have demonstrated clinical utility in tumor grading, response prediction to therapy, prognostic modeling, and tissue characterization across various imaging modalities including CT, MRI, and PET. Their sensitivity to fine-scale texture variations makes them essential tools in precision medicine and quantitative imaging biomarker development.</p>
        </div>
      </div>
    </div>

    <footer class="footer">
      <p>Open-source project under MIT License. <a href="https://github.com/pzaffino/Radiomics.jl">View on GitHub</a></p>
    </footer>
  </main>

  <script>
    const dropdownBtn = document.querySelector('.dropdown-btn');
    const mobileMenuToggle = document.getElementById('mobileMenuToggle');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');

    dropdownBtn.addEventListener('click', () => {
      dropdownBtn.parentElement.classList.toggle('active');
    });

    mobileMenuToggle.addEventListener('click', () => {
      sidebar.classList.toggle('mobile-open');
      overlay.classList.toggle('active');
      mobileMenuToggle.classList.toggle('active');
      mobileMenuToggle.textContent = mobileMenuToggle.classList.contains('active') ? '✕' : '☰';
    });

    overlay.addEventListener('click', () => {
      sidebar.classList.remove('mobile-open');
      overlay.classList.remove('active');
      mobileMenuToggle.classList.remove('active');
      mobileMenuToggle.textContent = '☰';
    });

    // Close menu on link click (mobile)
    const sidebarLinks = document.querySelectorAll('.sidebar a');
    sidebarLinks.forEach(link => {
      link.addEventListener('click', () => {
        if (window.innerWidth <= 768) {
          sidebar.classList.remove('mobile-open');
          overlay.classList.remove('active');
          mobileMenuToggle.classList.remove('active');
          mobileMenuToggle.textContent = '☰';
        }
      });
    });
  </script>

</body>
</html>